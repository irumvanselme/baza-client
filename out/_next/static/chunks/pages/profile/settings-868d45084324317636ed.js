_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{oLY8:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return h}));var a=s("o0o1"),n=s.n(a),c=s("HaE+"),r=s("rePB"),l=s("nKUr"),i=s("q1tI"),o=s("uPMs"),u=s("NsBw"),d=s("XcDm"),m=s("nOHt"),b=s("HEoy"),j=s.n(b),f=s("MtnM");function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(Object(s),!0).forEach((function(t){Object(r.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var x={full_name:[],username:[],email:[],title:[],bio:[],location:[],profile_pic:[]};function h(){var e=Object(i.useRef)(null),t=Object(i.useRef)(null),s=Object(i.useRef)(null),a=Object(i.useRef)(null),r=Object(i.useRef)(null),b=Object(i.useRef)(null),p=Object(i.useRef)(null),h=Object(i.useRef)(null),v=Object(i.useRef)(null),w=Object(i.useState)({_id:"",email:"",full_name:"",questionsDoc:8,username:"",profile:{_id:"",user_id:"",title:"",bio:"",location:"",created_at:""}}),N=w[0],g=w[1],_=Object(i.useState)(x),y=_[0],k=_[1],P=Object(i.useState)({open:!1,success:!1,message:"Invalid email or password"}),E=P[0],R=P[1],F=Object(m.useRouter)(),S=function(){var l=Object(c.a)(n.a.mark((function c(){var l,i,o;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,l={full_name:q(e),username:q(t),email:q(s),title:q(a),bio:q(r),location:q(b),profile_pic:"https://www.w3schools.com/w3images/avatar5.png"},!(i=new j.a(l,{full_name:"required|string|max:255|min:3",username:"required|string|max:255|min:3",email:"required|string|email|max:255|min:8",title:"required|string|min:3|max:100",bio:"required|string|min:3|max:500",location:"required|string|min:3|max:255",profile_pic:"required|url|min:3|max:255"})).fails(void 0)){n.next=5;break}return n.abrupt("return",k(O(O({},x),i.errors.all())));case 5:if(!i.passes(void 0)){n.next=12;break}return k(x),n.next=9,u.b.edit_profile(l);case 9:o=n.sent,200===o.status&&R({message:"Successfully updated the profile",open:!0,success:!0});case 12:n.next=18;break;case 14:if(n.prev=14,n.t0=n.catch(0),400!==n.t0.response.status){n.next=18;break}return n.abrupt("return",k(O(O({},x),n.t0.response.data)));case 18:case"end":return n.stop()}}),c,null,[[0,14]])})));return function(){return l.apply(this,arguments)}}(),q=function(e){return e.current.value};return Object(i.useEffect)((function(){(function(){var e=Object(c.a)(n.a.mark((function e(){var t,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)();case 2:if(!e.sent){e.next=11;break}return e.next=6,u.b.profile();case 6:t=e.sent,s=t.data,g(s),e.next=13;break;case 11:return e.next=13,F.push("/auth/login");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then()}),[]),Object(l.jsx)(o.a,{meta:{title:"Profile Settings ... "},children:Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)("form",{onSubmit:function(e){return e.preventDefault()},children:Object(l.jsxs)("div",{className:"row",children:[Object(l.jsxs)("div",{className:"card col-9 px-0 mb-5",children:[Object(l.jsx)("div",{className:"card-header pt-4",children:Object(l.jsx)("h4",{children:"Update Your Profile"})}),Object(l.jsxs)("div",{className:"card-body",children:[Object(l.jsx)("h5",{className:"py-3",children:"Basic information"}),Object(l.jsxs)("div",{className:"form-group row align-items-baseline",children:[Object(l.jsx)("label",{htmlFor:"full_names",className:"col-4",children:"Full names"}),Object(l.jsx)("input",{type:"text",id:"full_names",className:"col-7 w-50 form-control ".concat(y.full_name.length>0&&"is-invalid"),defaultValue:N.full_name,ref:e}),Object(l.jsx)("div",{className:"invalid-feedback offset-4",children:y.full_name[0]})]}),Object(l.jsxs)("div",{className:"form-group row align-items-baseline",children:[Object(l.jsx)("label",{htmlFor:"usernames",className:"col-4",children:"Username"}),Object(l.jsx)("input",{type:"text",id:"usernames",className:"col-7 w-50 form-control ".concat(y.username.length>0&&"is-invalid"),defaultValue:N.username,ref:t}),Object(l.jsx)("div",{className:"invalid-feedback offset-4",children:y.username[0]})]}),Object(l.jsxs)("div",{className:"form-group row align-items-baseline",children:[Object(l.jsx)("label",{htmlFor:"email",className:"col-4",children:"Email"}),Object(l.jsx)("input",{type:"text",id:"email",className:"col-7 w-50 form-control ".concat(y.email.length>0&&"is-invalid"),defaultValue:N.email,ref:s}),Object(l.jsx)("div",{className:"invalid-feedback offset-4",children:y.email[0]})]}),Object(l.jsx)("hr",{}),Object(l.jsx)("h5",{className:"py-3",children:"Profile information"}),Object(l.jsxs)("div",{className:"form-group row align-items-baseline",children:[Object(l.jsx)("label",{htmlFor:"title",className:"col-4",children:"Title"}),Object(l.jsx)("input",{type:"text",id:"title",className:"col-7 w-50 form-control ".concat(y.title.length>0&&"is-invalid"),defaultValue:N.profile.title,ref:a}),Object(l.jsx)("div",{className:"invalid-feedback offset-4",children:y.title[0]})]}),Object(l.jsxs)("div",{className:"form-group row align-items-baseline",children:[Object(l.jsx)("label",{htmlFor:"usernames",className:"col-4",children:"Bio"}),Object(l.jsx)("textarea",{rows:5,id:"usernames",className:"col-7 w-50 form-control ".concat(y.bio.length>0&&"is-invalid"),defaultValue:N.profile.bio,ref:r}),Object(l.jsx)("div",{className:"invalid-feedback offset-4",children:y.bio[0]})]}),Object(l.jsxs)("div",{className:"form-group row align-items-baseline",children:[Object(l.jsx)("label",{htmlFor:"location",className:"col-4",children:"Location"}),Object(l.jsx)("input",{type:"text",id:"location",className:"col-7 w-50 form-control ".concat(y.location.length>0&&"is-invalid"),defaultValue:N.profile.location,ref:b}),Object(l.jsx)("div",{className:"invalid-feedback offset-4",children:y.location[0]})]}),Object(l.jsx)("hr",{}),Object(l.jsx)("h5",{className:"py-3",children:"Update Password"}),Object(l.jsxs)("div",{className:"form-group row align-items-baseline",children:[Object(l.jsxs)("div",{className:"col-4",children:[Object(l.jsx)("label",{htmlFor:"current_password",children:"Current password"}),Object(l.jsx)("input",{type:"text",id:"current_password",className:"form-control",ref:p})]}),Object(l.jsxs)("div",{className:"col-4",children:[Object(l.jsx)("label",{htmlFor:"new_password",children:"New password"}),Object(l.jsx)("input",{type:"text",id:"new_password",className:"form-control",ref:h})]}),Object(l.jsxs)("div",{className:"col-4",children:[Object(l.jsx)("label",{htmlFor:"confirm_password",children:"Confirm password"}),Object(l.jsx)("input",{type:"text",id:"confirm_password",className:"form-control",ref:v})]}),Object(l.jsx)("button",{disabled:!0,type:"submit",className:"btn btn-info px-5 ml-3 mt-4",onClick:function(){},children:"Change password"})]})]})]}),Object(l.jsx)("div",{className:"col-3",children:Object(l.jsx)("div",{className:"card _profile-actions",children:Object(l.jsxs)("div",{className:"d-flex justify-content-between p-3",children:[Object(l.jsx)("button",{type:"submit",className:"btn btn-info px-4",onClick:S,children:"SAVE"}),Object(l.jsx)("button",{type:"reset",className:"btn btn-outline-danger px-4","data-dismiss":"modal",children:"RESET"})]})})})]})}),Object(l.jsx)(f.a,{open:E.open,success:E.success,counts:3e3,message:E.message,handleClose:function(){R(O(O({},E),{},{open:!1}))}})]})})}},xvTU:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/settings",function(){return s("oLY8")}])}},[["xvTU",0,1,4,2,3,5]]]);