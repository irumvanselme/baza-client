{"ast":null,"code":"import _regeneratorRuntime from \"D:/Developments/anselme-dev/baza/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/Developments/anselme-dev/baza/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\Developments\\\\anselme-dev\\\\baza\\\\client\\\\components\\\\Question.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport ReactDOMServer from \"react-dom/server\";\nimport Link from \"next/link\";\nimport $ from \"jquery\";\nimport { useRouter } from \"next/router\";\nimport { User } from \"./User\";\nimport { AnswerAQuestion } from \"./Question/Answer\";\nimport { isAuthed } from \"../middlewares/auth\";\nimport { questionsService } from \"../services\";\nexport function Question(_ref) {\n  _s();\n\n  var _this = this;\n\n  var question = _ref.question;\n  var router = useRouter();\n\n  var _useState = useState(false),\n      liked = _useState[0],\n      setLiked = _useState[1];\n\n  var _useState2 = useState(false),\n      disLiked = _useState2[0],\n      setDisLiked = _useState2[1];\n\n  var _useState3 = useState(0),\n      likes = _useState3[0],\n      setLikes = _useState3[1];\n\n  var _useState4 = useState(0),\n      disLikes = _useState4[0],\n      setDisLikes = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _id = _useState5[0],\n      setId = _useState5[1];\n\n  useEffect(function () {\n    var fetchData = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                setLiked(question.likes_this);\n                setDisLiked(question.dislikes_this);\n                setId(question._id);\n                setLikes(question.likes);\n                setDisLikes(question.disLikes);\n                $(\"#popover\" + question._id).popover({\n                  trigger: \"hover\",\n                  template: ReactDOMServer.renderToStaticMarkup( /*#__PURE__*/_jsxDEV(User, {\n                    names: question.user.full_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 30,\n                    columnNumber: 21\n                  }, _this))\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function fetchData() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    fetchData().then();\n  }, [question]);\n\n  var like = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var is_authed;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return isAuthed();\n\n            case 2:\n              is_authed = _context2.sent;\n\n              if (!is_authed) {\n                _context2.next = 9;\n                break;\n              }\n\n              if (liked) {\n                setLiked(false);\n                setLikes(likes - 1);\n              } else if (disLiked) {\n                setDisLiked(false);\n                setDisLikes(disLikes - 1);\n                setLiked(true);\n                setLikes(likes + 1);\n              } else {\n                setLiked(true);\n                setLikes(likes + 1);\n              }\n\n              _context2.next = 7;\n              return questionsService.like(question._id);\n\n            case 7:\n              _context2.next = 11;\n              break;\n\n            case 9:\n              _context2.next = 11;\n              return router.push(\"/auth/login\");\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function like() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var dislike = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var is_authed;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return isAuthed();\n\n            case 2:\n              is_authed = _context3.sent;\n\n              if (!is_authed) {\n                _context3.next = 9;\n                break;\n              }\n\n              if (disLiked) {\n                setDisLiked(false);\n                setDisLikes(disLikes - 1);\n              } else if (liked) {\n                setLiked(false);\n                setLikes(likes - 1);\n                setDisLiked(true);\n                setDisLikes(disLikes + 1);\n              } else {\n                setDisLiked(true);\n                setDisLikes(disLikes + 1);\n              }\n\n              _context3.next = 7;\n              return questionsService.dislike(question._id);\n\n            case 7:\n              _context3.next = 11;\n              break;\n\n            case 9:\n              _context3.next = 11;\n              return router.push(\"/auth/login\");\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function dislike() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card py-4 px-4 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-between align-items-start\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"question\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [question.title, \" ?\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"asked by\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"text-primary\",\n                id: \"popover\" + question._id,\n                \"data-toggle\": \"popover\",\n                title: \"IRUMVA HABUMUGISHA Anselme\",\n                \"data-content\": \"Student at Rwanda Coding Academy\",\n                children: question.user.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 33\n              }, this), \" \", \"in\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-weight-bolder\",\n                children: question.topic_names[0] || \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 33\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"answer\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-sm btn-success px-4 d-none d-sm-block\",\n                \"data-toggle\": \"modal\",\n                \"data-target\": \"#answerQuestion\" + _id,\n                children: \"Answer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-right\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-bookmark-o pr-2 mt-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                children: question.answersDoc\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 33\n              }, this), \" answers\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"body py-3\",\n        children: question.body\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"actions d-flex justify-content-between pt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex align-items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: like,\n            className: \"button \".concat(liked ? \"text-primary\" : \"text-secondary\", \" d-flex align-items-center\"),\n            title: \"Up vote\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa \".concat(liked ? \"fa-thumbs-up\" : \"fa-thumbs-o-up\", \" pr-2\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: likes\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: dislike,\n            className: \"button \".concat(disLiked ? \"text-danger\" : \"text-secondary\", \" d-flex align-items-center ml-5\"),\n            title: \"Down vote\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa \".concat(disLiked ? \"fa-thumbs-down\" : \"fa-thumbs-o-down\", \" pr-2\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: disLikes\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            href: \"/questions/\".concat(question.slug),\n            passHref: true,\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"text-primary\",\n              children: \"Read more\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(AnswerAQuestion, {\n      question: _id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Question, \"A3FVe38M/7o3S6SDGj8bNz5/WCU=\", false, function () {\n  return [useRouter];\n});\n\n_c = Question;\n\nvar _c;\n\n$RefreshReg$(_c, \"Question\");","map":{"version":3,"sources":["D:/Developments/anselme-dev/baza/client/components/Question.jsx"],"names":["React","useEffect","useState","ReactDOMServer","Link","$","useRouter","User","AnswerAQuestion","isAuthed","questionsService","Question","question","router","liked","setLiked","disLiked","setDisLiked","likes","setLikes","disLikes","setDisLikes","_id","setId","fetchData","likes_this","dislikes_this","popover","trigger","template","renderToStaticMarkup","user","full_name","then","like","is_authed","push","dislike","title","username","topic_names","answersDoc","body","slug"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport ReactDOMServer from \"react-dom/server\";\nimport Link from \"next/link\";\nimport $ from \"jquery\";\nimport { useRouter } from \"next/router\";\n\nimport { User } from \"./User\";\nimport { AnswerAQuestion } from \"./Question/Answer\";\nimport { isAuthed } from \"../middlewares/auth\";\nimport { questionsService } from \"../services\";\n\nexport function Question({ question }) {\n    const router = useRouter();\n    const [liked, setLiked] = useState(false);\n    const [disLiked, setDisLiked] = useState(false);\n    const [likes, setLikes] = useState(0);\n    const [disLikes, setDisLikes] = useState(0);\n    const [_id, setId] = useState(\"\");\n\n    useEffect(() => {\n        const fetchData = async () => {\n            setLiked(question.likes_this);\n            setDisLiked(question.dislikes_this);\n            setId(question._id);\n            setLikes(question.likes);\n            setDisLikes(question.disLikes);\n            $(\"#popover\" + question._id).popover({\n                trigger: \"hover\",\n                template: ReactDOMServer.renderToStaticMarkup(\n                    <User names={question.user.full_name} />\n                ),\n            });\n        };\n        fetchData().then();\n    }, [question]);\n\n    const like = async () => {\n        let is_authed = await isAuthed();\n        if (is_authed) {\n            if (liked) {\n                setLiked(false);\n                setLikes(likes - 1);\n            } else if (disLiked) {\n                setDisLiked(false);\n                setDisLikes(disLikes - 1);\n                setLiked(true);\n                setLikes(likes + 1);\n            } else {\n                setLiked(true);\n                setLikes(likes + 1);\n            }\n            await questionsService.like(question._id);\n        } else await router.push(\"/auth/login\");\n    };\n\n    const dislike = async () => {\n        let is_authed = await isAuthed();\n        if (is_authed) {\n            if (disLiked) {\n                setDisLiked(false);\n                setDisLikes(disLikes - 1);\n            } else if (liked) {\n                setLiked(false);\n                setLikes(likes - 1);\n                setDisLiked(true);\n                setDisLikes(disLikes + 1);\n            } else {\n                setDisLiked(true);\n                setDisLikes(disLikes + 1);\n            }\n            await questionsService.dislike(question._id);\n        } else await router.push(\"/auth/login\");\n    };\n\n    return (\n        <div>\n            <div className=\"card py-4 px-4 mb-4\">\n                <div className=\"header\">\n                    <div className=\"d-flex justify-content-between align-items-start\">\n                        <div className=\"question\">\n                            <h4>{question.title} ?</h4>\n                            <div>\n                                asked by{\" \"}\n                                <a\n                                    className=\"text-primary\"\n                                    id={\"popover\" + question._id}\n                                    data-toggle=\"popover\"\n                                    title=\"IRUMVA HABUMUGISHA Anselme\"\n                                    data-content=\"Student at Rwanda Coding Academy\"\n                                >\n                                    {question.user.username}\n                                </a>{\" \"}\n                                in{\" \"}\n                                <span className=\"font-weight-bolder\">\n                                    {question.topic_names[0] || \"\"}\n                                </span>{\" \"}\n                            </div>\n                        </div>\n                        <div className=\"answer\">\n                            <div>\n                                <button\n                                    className=\"btn btn-sm btn-success px-4 d-none d-sm-block\"\n                                    data-toggle=\"modal\"\n                                    data-target={\"#answerQuestion\" + _id}\n                                >\n                                    Answer\n                                </button>\n                            </div>\n                            <div className=\"text-right\">\n                                <i className=\"fa fa-bookmark-o pr-2 mt-2\" />\n                                <b>{question.answersDoc}</b> answers\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"body py-3\">{question.body}</div>\n                <div className=\"actions d-flex justify-content-between pt-3\">\n                    <div className=\"d-flex align-items-center\">\n                        <div\n                            onClick={like}\n                            className={`button ${\n                                liked ? \"text-primary\" : \"text-secondary\"\n                            } d-flex align-items-center`}\n                            title=\"Up vote\"\n                        >\n                            <div>\n                                <i\n                                    className={`fa ${\n                                        liked\n                                            ? \"fa-thumbs-up\"\n                                            : \"fa-thumbs-o-up\"\n                                    } pr-2`}\n                                />\n                            </div>\n                            <div>{likes}</div>\n                        </div>\n                        <div\n                            onClick={dislike}\n                            className={`button ${\n                                disLiked ? \"text-danger\" : \"text-secondary\"\n                            } d-flex align-items-center ml-5`}\n                            title=\"Down vote\"\n                        >\n                            <div>\n                                <i\n                                    className={`fa ${\n                                        disLiked\n                                            ? \"fa-thumbs-down\"\n                                            : \"fa-thumbs-o-down\"\n                                    } pr-2`}\n                                />\n                            </div>\n                            <div>{disLikes}</div>\n                        </div>\n                    </div>\n                    <div>\n                        <Link href={`/questions/${question.slug}`} passHref>\n                            <a className=\"text-primary\">Read more</a>\n                        </Link>\n                    </div>\n                </div>\n            </div>\n\n            <AnswerAQuestion question={_id} />\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}