(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[5],{"6ZrR":function(e,t,n){"use strict";var r=n("1OyB"),a=n("vuIU"),c=n("Ji7U"),s=n("md7G"),i=n("foSv"),o=n("ZpSk"),u=n("/ncQ");function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var d=function(e){Object(c.a)(n,e);var t=l(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"get_all",value:function(){return u.a.get("/topics")}},{key:"get",value:function(e){return u.a.get("/topics/".concat(e))}},{key:"questions",value:function(e){return u.a.get("/topics/".concat(e,"/questions"))}}]),n}(o.a);t.a=new d},VxtC:function(e,t,n){e.exports={navbar:"app_navbar__23aVt",logo:"app_logo__29opo",list:"app_list__3FQsM",topic:"app_topic__4Dmgu"}},uPMs:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var r=n("o0o1"),a=n.n(r),c=n("HaE+"),s=n("nKUr"),i=n("q1tI"),o=n.n(i),u=n("8Kt/"),l=n.n(u),d=n("YFqc"),b=n.n(d),p=n("VxtC"),j=n.n(p),f=n("nOHt"),h=function(){var e=Object(f.useRouter)(),t=function(){var t=Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.push("/");case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(s.jsx)(b.a,{href:"/",onClick:t,children:Object(s.jsx)("div",{className:"".concat(j.a.logo," text-left pl-2"),children:"Baza.com"})})},m=n("NsBw"),O=function(e){var t=e.auth,n=Object(i.useState)("..."),r=n[0],u=n[1],l=Object(f.useRouter)(),d=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,l.push("/search");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){t&&function(){var e=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.b.profile();case 2:t=e.sent,n=t.data,u(n.username);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then()}),[t]);var p=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sessionStorage.removeItem("token"),e.next=3,l.push("/auth/login");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.jsx)("div",{className:j.a.navbar,children:Object(s.jsxs)("div",{className:"d-flex justify-content-between align-items-center h-100 px-2 px-lg-5 mx-lg-5",children:[Object(s.jsx)("div",{children:Object(s.jsx)(h,{})}),Object(s.jsx)("div",{className:"d-none d-md-block",children:Object(s.jsx)("form",{onSubmit:d,children:Object(s.jsx)("input",{type:"search",className:"form-control font-weight-normal",placeholder:"Search ... "})})}),Object(s.jsx)("div",{children:t?Object(s.jsxs)(o.a.Fragment,{children:[Object(s.jsx)("img",{src:"https://www.w3schools.com/w3images/avatar5.png",className:"_navbar-avatar mr-3",alt:"Avatar",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}),Object(s.jsxs)("div",{className:"dropdown-menu dropdown-menu-right shadow","aria-labelledby":"dropdownMenuButton",children:[Object(s.jsx)("span",{className:"dropdown-item-text font-weight-bolder",children:r}),Object(s.jsx)(b.a,{href:"/profile/settings",passHref:!0,children:Object(s.jsx)("a",{className:"dropdown-item",children:"Profile Settings"})}),Object(s.jsx)("a",{className:"dropdown-item",onClick:p,children:"Log out"})]}),Object(s.jsx)("button",{className:"btn btn-success","data-toggle":"modal","data-target":"#askQuestion",children:"Ask a question"})]}):Object(s.jsxs)(o.a.Fragment,{children:[Object(s.jsx)(b.a,{href:"/auth/login",children:"Login"}),Object(s.jsx)(b.a,{href:"/auth/register",children:"Register"}),Object(s.jsx)("button",{className:"btn btn-success","data-toggle":"modal","data-target":"#askQuestion",children:"Ask a question"})]})})]})})},x=n("rePB"),v=n("HEoy"),g=n.n(v),w=n("6ZrR"),y=n("AsAx"),k=n("MtnM"),N=n("EVdn"),_=n.n(N),S=n("XcDm");function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){Object(x.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){var t=e.askNewQuestion,n=Object(f.useRouter)(),r=Object(i.useRef)(null),o=Object(i.useRef)(null),u=Object(i.useRef)(null),l=Object(i.useState)({open:!1,success:!1,message:"You have successfully created an question"}),d=l[0],b=l[1],p={topic:[],title:[],body:[]},j=Object(i.useState)(p),h=j[0],m=j[1],O=Object(i.useState)([]),x=O[0],v=O[1];Object(i.useEffect)((function(){(function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get_all();case 2:t=e.sent,v(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then()}),[]);var N=function(e){return e.current.value},q=function(){var e=Object(c.a)(a.a.mark((function e(c){var s,i,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,Object(S.a)();case 3:if(e.sent){e.next=9;break}return _()("#askQuestion").modal("hide"),e.next=8,n.push("/auth/login");case 8:return e.abrupt("return",e.sent);case 9:if(e.prev=9,s={topics:[N(r)],title:N(o),body:N(u)},!(i=new g.a(s,{topics:"required|array",title:"required|string|min:4",body:"string|required|min:10"})).fails(void 0)){e.next=14;break}return e.abrupt("return",m(R(R({},p),i.errors.all())));case 14:if(!i.passes(void 0)){e.next=21;break}return m(R(R({},p),i.errors.all())),e.next=18,y.a.create(s);case 18:l=e.sent,t(l.data),201===l.status&&(_()("#askQuestion").modal("hide"),b({open:!0,success:!0,message:"You have successfully created a question"}));case 21:e.next=27;break;case 23:if(e.prev=23,e.t0=e.catch(9),400!==e.t0.response.status){e.next=27;break}return e.abrupt("return",m(R(R({},p),e.t0.response.data)));case 27:case"end":return e.stop()}}),e,null,[[9,23]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"modal fade",id:"askQuestion",tabIndex:"-1",role:"dialog",children:Object(s.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-centered",role:"document",children:Object(s.jsx)("div",{className:"modal-content card p-3 pt-4 px-sm-5",children:Object(s.jsxs)("form",{action:"",onSubmit:q,children:[Object(s.jsxs)("div",{className:"pb-4",children:[Object(s.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[Object(s.jsx)("h4",{className:"font-weight-bold py-2 pb-4",children:"Ask your question"}),Object(s.jsxs)("div",{className:"d-flex align-items-center",children:[Object(s.jsx)("div",{children:"In"}),Object(s.jsx)("div",{children:Object(s.jsx)("select",{className:"form-control font-weight-bolder border-0 ",ref:r,children:x.map((function(e,t){return Object(s.jsx)("option",{value:e._id,children:e.name},t)}))})})]})]}),Object(s.jsx)("input",{type:"text",className:"form-control ".concat(h.title.length>0&&"is-invalid","  _bg-light-gray"),placeholder:"Eg: How much eggs can a hen lay at a time",ref:o}),Object(s.jsx)("div",{className:"invalid-feedback",children:h.title[0]}),Object(s.jsxs)("div",{className:"form-group mt-3",children:[Object(s.jsx)("label",{htmlFor:"description",className:"font-weight-bold",children:"Explain your question (optional)"}),Object(s.jsx)("textarea",{name:"",id:"description",rows:4,className:"form-control ".concat(h.body.length>0&&"is-invalid","  _bg-light-gray"),ref:u}),Object(s.jsx)("div",{className:"invalid-feedback",children:h.body[0]})]})]}),Object(s.jsxs)("div",{className:"text-right",children:[Object(s.jsx)("button",{type:"submit",className:"btn btn-outline-info mx-4 px-4",children:"Submit"}),Object(s.jsx)("button",{type:"button",className:"btn btn-outline-danger px-4","data-dismiss":"modal",children:"Close"})]})]})})})}),Object(s.jsx)(k.a,{open:d.open,success:d.success,counts:3e3,message:d.message,handleClose:function(){b(R(R({},d),{},{open:!1}))}})]})}var P=n("E3st");function D(e){var t=e.children,n=e.meta,r=e.append_questions,u=Object(i.useState)(!1),d=u[0],b=u[1];return Object(i.useEffect)((function(){(function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.profile();case 2:e.sent.data._id&&b(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then()}),[]),Object(s.jsxs)(o.a.Fragment,{children:[Object(s.jsx)(l.a,{children:Object(s.jsx)("title",{children:n.title})}),Object(s.jsxs)("div",{children:[Object(s.jsx)("header",{children:Object(s.jsx)(O,{auth:d})}),Object(s.jsxs)("main",{className:"pt-3 container-md",children:[t,Object(s.jsx)(E,{askNewQuestion:r})]})]})]})}}}]);